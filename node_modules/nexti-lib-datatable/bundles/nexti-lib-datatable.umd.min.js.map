{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/nexti-lib-datatable/src/lib/services/excel.service.ts","../../../projects/nexti-lib-datatable/src/lib/component/table/table.component.ts","../../../projects/nexti-lib-datatable/src/lib/pages/nexti-lib-datatable.component.ts","../../../projects/nexti-lib-datatable/src/lib/component/breadcrumbs/breadcrumbs.component.ts","../../../projects/nexti-lib-datatable/src/lib/component/titlesecondary/titlesecondary.component.ts","../../../projects/nexti-lib-datatable/src/lib/nexti-lib-datatable.module.ts"],"names":["Object","create","__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","__read","n","r","e","ar","push","error","__spread","arguments","concat","NumberFormat","FormatType","OperationFormat","ExcelService","datePipe","currencyPipe","this","prototype","exportAsExcelFile","data","excelFileName","formatData","ws","XLSX.utils","aoa_to_sheet","wch","wb","Sheets","SheetNames","excelBuffer","XLSX.write","bookType","type","saveAsExcelFile","buffer","fileName","Blob","FileSaver.saveAs","Date","getTime","getTableRow","array","param","whiteSpace","_this","rowsCobradas","commonDateForStr","forEach","f","fechaEmi","transform","FechaEmision","valorFact","importeTotal","fechaEmiRet","FechaEmisionRet","valorRet","importeTotalRet","valorTotal","actualDataRow","Numdoc","NumdocRet","rucEmpresa","razonSocial","totalFact","totalRet","totalPagado","cantFact","cantRet","tableHeader","facturasCobradas","cobradas","facturasPagadas","pagadas","rowsPagadas","rowTotalCobradas","cantCobradas","sumCobradas","cantRetCobradas","sumRetCobradas","totalCobradas","rowTotalPagadas","cantPagadas","sumPagadas","cantRetPagadas","sumRetPagadas","totalPagadas","netoTotalFor","netoTotal","rowNetos","netoFact","netoRet","rowPosicionNeta","now","Ruc","fechaSesion","Injectable","args","providedIn","DatePipe","CurrencyPipe","AlignClass","TableComponent","paginacion","totalRegistros","actualPage","multFPP","onNext","EventEmitter","onReturn","onDelete","onUpdate","onActive","onShow","onShowEvent","footerRow","dataPerm$","Array","observableBtnDelete$","observableBtnUpdate$","observableBtnActive","filas","filasPorPagina","ngOnChanges","changes","data$","recursos","currentValue","previousValue","update","delete","active","ngOnInit","orderHeaderStatus","header","map","h","calcFilasPorPagina","cantidadFilas","index","paginaSiguiente","emit","paginaAnterior","onOrderColumn","head","orderStatus","sort","_","b","title","subtitle","getFooterData","_b","footerConfig","customTotalTitle","customTotalRows","customTotalFormatting","customTotalType","customTotalAlign","customTotalFixed","customOperationFormatting","tableFooterData","rawData","_a","itemArray","rawDataRow","formatedData","item","getFormatDataToTreatment","getRawData","procesedTotals_1","RES","trasposeMatrix","reduce","a","format","CUR","align","fixed","less","finalFooterData","cont_1","itemToPush","customIndex","this_1","hiddenActions","formatCurrencyToNumber","Number","String","replace","matrix","colIndex","row","toggleFilterClass","isObject","val","indexCol","returnItem_1","indexType","NUM","COU","onDeleteItem","onActiveItem","onUpdateItem","onShowItem","$event","Component","selector","template","Input","Output","NextiLibDatatableComponent","excelService","titleXs","linkBack","actionState","multiTable","sections","onBack","onfilter","filterSelected","selectFilter","element","selected","list","inputSearch","nativeElement","ngDoCheck","datatable","onFilter","onShowItemEvent","onlyNumbers","event","charCode","customSearchBancoFn","term","toLowerCase","bancorresponsal","includes","customSearchCompaniesFn","ruc","filter","search","datafilter","_c","_d","filterList","lista","lista_1","lista_1_1","toCompareString","toString","toUpperCase","getReportHeader","customHeader","reportConfig","getReportBody","customIndexRows","footLabel","tableData","tableDataRow","generatePdf","pdf","jsPDF.jsPDF","setProperties","subject","sessionDate","tableTitle","pageSize","internal","pageWidth","width","getWidth","autoTable","body","content","colSpan","styles","fontSize","fontStyle","showHead","theme","fillColor","textColor","valign","columnStyles","0","1","halign","lastTableY","lastAutoTable","finalY","startY","overflow","margin","right","left","tableRenderObj","showFoot","headStyles","footStyles","foot","save","generateTxt","options","headers","fieldSeparator","quoteStrings","decimalseparator","convertToJSON","Angular2Txt","procesedTotals_2","exportAsXLSX","excelData","isNumber","test","objArray","k","key","actualElement","el","onBackItem","ViewChild","ViewChildren","BreadcrumbsComponent","breadcrumbs","TitlesecondaryComponent","infoAdicional","NgModule","declarations","imports","FormsModule","CommonModule","NgSelectModule","exports","providers"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport * as FileSaver from 'file-saver';\r\nimport * as XLSX from 'xlsx';\r\nimport { CurrencyPipe, DatePipe } from '@angular/common';\r\n\r\nconst EXCEL_TYPE =\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8';\r\nconst EXCEL_EXTENSION = '.xlsx';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ExcelService {\r\n  constructor(private datePipe: DatePipe, private currencyPipe: CurrencyPipe) {}\r\n\r\n  public exportAsExcelFile(data: any[], excelFileName: string): void {\r\n    const formatData = this.formatData(data);\r\n    const ws: XLSX.WorkSheet = XLSX.utils.aoa_to_sheet(formatData);\r\n    const wscols = [\r\n      { wch: 1 },\r\n      { wch: 1 },\r\n      { wch: 35 },\r\n      { wch: 15 },\r\n      { wch: 15 },\r\n      { wch: 10 },\r\n      { wch: 16 },\r\n      { wch: 15 },\r\n      { wch: 20 },\r\n      { wch: 20 },\r\n    ];\r\n    ws['!cols'] = wscols;\r\n\r\n    const wb: XLSX.WorkBook = {\r\n      Sheets: { data: ws },\r\n      SheetNames: ['data'],\r\n    };\r\n    const excelBuffer: any = XLSX.write(wb, {\r\n      bookType: 'xlsx',\r\n      type: 'array',\r\n    });\r\n    this.saveAsExcelFile(excelBuffer, excelFileName);\r\n  }\r\n\r\n  private saveAsExcelFile(buffer: any, fileName: string): void {\r\n    const data: Blob = new Blob([buffer], { type: EXCEL_TYPE });\r\n    FileSaver.saveAs(\r\n      data,\r\n      fileName + '_' + new Date().getTime() + EXCEL_EXTENSION\r\n    );\r\n  }\r\n\r\n  getTableRow(array, param, whiteSpace) {\r\n    let rowsCobradas = [];\r\n    const commonDateForStr = 'dd/MM/yyyy';\r\n\r\n    array.forEach((f: any) => {\r\n      if (f.data.length) {\r\n        f.data.forEach((e: any, i: number) => {\r\n          const fechaEmi = this.datePipe.transform(\r\n            e.FechaEmision,\r\n            commonDateForStr\r\n          );\r\n          const valorFact = this.currencyPipe.transform(e.importeTotal);\r\n          const fechaEmiRet = this.datePipe.transform(\r\n            e.FechaEmisionRet,\r\n            commonDateForStr\r\n          );\r\n          const valorRet = this.currencyPipe.transform(e.importeTotalRet);\r\n          const valorTotal = this.currencyPipe.transform(e[param]);\r\n\r\n          let actualDataRow = [\r\n            e.Numdoc,\r\n            fechaEmi,\r\n            valorFact,\r\n            e.NumdocRet,\r\n            fechaEmiRet,\r\n            valorRet,\r\n            valorTotal,\r\n          ];\r\n\r\n          if (i == 0) {\r\n            rowsCobradas.push([...whiteSpace, f.rucEmpresa, ...actualDataRow]);\r\n\r\n            if (f.data.length == 1) {\r\n              rowsCobradas.push([...whiteSpace, f.razonSocial]);\r\n            }\r\n          } else if (i == 1) {\r\n            rowsCobradas.push([...whiteSpace, f.razonSocial, ...actualDataRow]);\r\n          } else {\r\n            rowsCobradas.push([...whiteSpace, '', ...actualDataRow]);\r\n          }\r\n        });\r\n      }\r\n      const totalFact = this.currencyPipe.transform(f.totalFact);\r\n      const totalRet = this.currencyPipe.transform(f.totalRet);\r\n      const totalPagado = this.currencyPipe.transform(f.totalPagado);\r\n      // subtotal\r\n      rowsCobradas.push([\r\n        ...whiteSpace,\r\n        '',\r\n        f.cantFact,\r\n        '',\r\n        totalFact,\r\n        f.cantRet,\r\n        '',\r\n        totalRet,\r\n        totalPagado,\r\n      ]);\r\n    });\r\n\r\n    return rowsCobradas;\r\n  }\r\n\r\n  formatData(data) {\r\n    const whiteSpace = ['', ''];\r\n    const tableHeader = [\r\n      ...whiteSpace,\r\n      'RUC / RAZON SOCIAL',\r\n      'Número Factura',\r\n      'Fecha Factura',\r\n      'Valor Factura',\r\n      'Número Retención',\r\n      'Fecha Retención',\r\n      'Valor Retención',\r\n      'Valor Total Pagado',\r\n    ];\r\n    const facturasCobradas: [] = data.cobradas;\r\n    const facturasPagadas: [] = data.pagadas;\r\n    const rowsCobradas = this.getTableRow(\r\n      facturasCobradas,\r\n      'totalCobrado',\r\n      whiteSpace\r\n    );\r\n    const rowsPagadas = this.getTableRow(\r\n      facturasPagadas,\r\n      'totalPagado',\r\n      whiteSpace\r\n    );\r\n\r\n    const rowTotalCobradas = [\r\n      ...whiteSpace,\r\n      'TOTAL FACTURAS COBRADAS',\r\n      data.cantCobradas,\r\n      '',\r\n      this.currencyPipe.transform(data.sumCobradas),\r\n      data.cantRetCobradas,\r\n      '',\r\n      this.currencyPipe.transform(data.sumRetCobradas),\r\n      this.currencyPipe.transform(data.totalCobradas),\r\n    ];\r\n\r\n    const rowTotalPagadas = [\r\n      ...whiteSpace,\r\n      'TOTAL FACTURAS PAGADAS',\r\n      data.cantPagadas,\r\n      '',\r\n      this.currencyPipe.transform(data.sumPagadas),\r\n      data.cantRetPagadas,\r\n      '',\r\n      this.currencyPipe.transform(data.sumRetPagadas),\r\n      this.currencyPipe.transform(data.totalPagadas),\r\n    ];\r\n    const netoTotalFor = this.currencyPipe.transform(data.netoTotal);\r\n\r\n    const rowNetos = [\r\n      ...whiteSpace,\r\n      'VALORES NETOS',\r\n      '',\r\n      '',\r\n      this.currencyPipe.transform(data.netoFact),\r\n      '',\r\n      '',\r\n      this.currencyPipe.transform(data.netoRet),\r\n      netoTotalFor,\r\n    ];\r\n\r\n    const rowPosicionNeta = [\r\n      ...whiteSpace,\r\n      'POSICION NETA DE LA EMPRESA',\r\n      netoTotalFor,\r\n    ];\r\n\r\n    const actualFormatDate = this.datePipe.transform(\r\n      Date.now(),\r\n      'dd/MM/YYYY HH:mm:ss'\r\n    );\r\n\r\n    return [\r\n      [],\r\n      [],\r\n      // prettier-ignore\r\n      [...whiteSpace, 'SESIÓN DE COMPENSACIÓN DEFINITIVA', '', '', '', '', '', '', actualFormatDate],\r\n      [...whiteSpace, 'REPORTE POR EMPRESA PARTICIPANTE'],\r\n      [],\r\n      // prettier-ignore\r\n      [...whiteSpace, 'EMPRESA :', data.Ruc, data.razonSocial, '', '', '', 'FECHA COMPENSACIÓN', data.fechaSesion],\r\n      [],\r\n      [...whiteSpace, 'FACTURAS COBRADAS'],\r\n      tableHeader,\r\n      ...rowsCobradas,\r\n      rowTotalCobradas,\r\n      [],\r\n      [],\r\n      [...whiteSpace, 'FACTURAS PAGADAS'],\r\n      tableHeader,\r\n      ...rowsPagadas,\r\n      rowTotalPagadas,\r\n      [],\r\n      [...whiteSpace, 'RESUMEN PROCESO DE COMPENSACIÓN'],\r\n      // prettier-ignore\r\n      [...whiteSpace, '', 'Número Facturas', '', 'Valor Facturas', 'Número Retenciones', '', 'Valor Retenciones', 'Valor Total'],\r\n      [],\r\n      rowTotalCobradas,\r\n      rowTotalPagadas,\r\n      rowNetos,\r\n      [],\r\n      rowPosicionNeta,\r\n    ];\r\n  }\r\n}\r\n","import { CurrencyPipe } from '@angular/common';\r\nimport {\r\n  Component,\r\n  Input,\r\n  Output,\r\n  SimpleChanges,\r\n  EventEmitter,\r\n} from '@angular/core';\r\n\r\nenum NumberFormat {\r\n  NUM = 'number',\r\n  CUR = 'currency',\r\n}\r\n\r\nenum FormatType {\r\n  NUM = 'number',\r\n  CUR = 'currency',\r\n  COU = 'count',\r\n}\r\n\r\nenum OperationFormat {\r\n  SUM = 'suma',\r\n  RES = 'resta',\r\n}\r\n\r\n@Component({\r\n  selector: 'nexti-lib-table',\r\n  templateUrl: './table.component.html',\r\n  styleUrls: ['./table.component.sass'],\r\n})\r\nexport class TableComponent {\r\n  @Input() title: any;\r\n  @Input() titleEmpty: string;\r\n  @Input() header: any;\r\n  @Input() data$: any;\r\n  @Input() footerConfig: any;\r\n  @Input() recursos: any;\r\n  @Input() actionState: any;\r\n  @Input() opOcultarFooter: boolean;\r\n  @Input() hiddenActions: boolean;\r\n  @Input() isLoading?: boolean;\r\n  @Input() paginacion?: boolean = false;\r\n  @Input() totalRegistros?: number = 0;\r\n  @Input() actualPage?: number = 0;\r\n  @Input() multFPP?: number = 0;\r\n  @Output() onNext = new EventEmitter<any>();\r\n  @Output() onReturn = new EventEmitter<any>();\r\n  @Output() onDelete = new EventEmitter<any>();\r\n  @Output() onUpdate = new EventEmitter<any>();\r\n  @Output() onActive = new EventEmitter<any>();\r\n  @Output() onShow = new EventEmitter<any>();\r\n  @Output() onShowEvent = new EventEmitter<any>();\r\n  footerRow = [];\r\n  orderHeaderStatus: Array<boolean>;\r\n  dataPerm$ = new Array<any>();\r\n  observableBtnDelete$: boolean = false;\r\n  observableBtnUpdate$: boolean = false;\r\n  observableBtnActive: boolean = false;\r\n  filas: Array<any> = [];\r\n  filasPorPagina: number = 0;\r\n\r\n  constructor(private currencyPipe: CurrencyPipe) {}\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { data$, recursos } = changes;\r\n    if (data$?.currentValue !== data$?.previousValue) {\r\n      this.dataPerm$ = data$?.currentValue;\r\n    }\r\n\r\n    if (recursos?.currentValue !== recursos?.previousValue) {\r\n      this.observableBtnUpdate$ = this.recursos.update;\r\n      this.observableBtnDelete$ = this.recursos.delete;\r\n      this.observableBtnActive = this.recursos.active;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.orderHeaderStatus = this.header.map((h) => false);\r\n    if (this.paginacion && this.multFPP != 0) {\r\n      this.calcFilasPorPagina();\r\n    } else if (this.paginacion && this.multFPP === 0) {\r\n      this.filasPorPagina = 10;\r\n      this.filas.push(10);\r\n    }\r\n  }\r\n\r\n  calcFilasPorPagina() {\r\n    let cantidadFilas = 0;\r\n    for (let index = 0; index < 10; index++) {\r\n      cantidadFilas = cantidadFilas + this.multFPP;\r\n      this.filas.push(cantidadFilas);\r\n    }\r\n    this.filasPorPagina = this.filas[0];\r\n  }\r\n\r\n  paginaSiguiente() {\r\n    this.onNext.emit(this.filasPorPagina);\r\n  }\r\n  paginaAnterior() {\r\n    this.onReturn.emit(this.filasPorPagina);\r\n  }\r\n\r\n  onOrderColumn(head: any, index: number) {\r\n    const orderStatus = this.orderHeaderStatus[index];\r\n    this.orderHeaderStatus[index] = !orderStatus;\r\n    this.data$ = this.dataPerm$.sort((_, b) => {\r\n      if (typeof _[index] === 'object') {\r\n        if (_[index].title) {\r\n          if (_[index].title > b[index].title) {\r\n            return orderStatus ? 1 : -1;\r\n          }\r\n          if (_[index].title < b[index].title) {\r\n            return orderStatus ? -1 : 1;\r\n          }\r\n          return 0;\r\n        }\r\n        if (b[index].subtitle) {\r\n          if (_[index].subtitle > b[index].subtitle) {\r\n            return orderStatus ? 1 : -1;\r\n          }\r\n          if (_[index].subtitle < b[index].subtitle) {\r\n            return orderStatus ? -1 : 1;\r\n          }\r\n          return 0;\r\n        }\r\n      } else {\r\n        if (_[index] > b[index]) {\r\n          return orderStatus ? 1 : -1;\r\n        }\r\n        if (_[index] < b[index]) {\r\n          return orderStatus ? -1 : 1;\r\n        }\r\n        return 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  getFooterData() {\r\n    const {\r\n      customTotalTitle,\r\n      customTotalRows,\r\n      customTotalFormatting,\r\n      customTotalType,\r\n      customTotalAlign,\r\n      customTotalFixed,\r\n      customOperationFormatting,\r\n    } = this.footerConfig;\r\n\r\n    let tableFooterData = [];\r\n    let rawData = [];\r\n\r\n    this.data$?.forEach((itemArray) => {\r\n      let rawDataRow = [];\r\n\r\n      // Step 1: format - prepare dat\r\n      const formatedData = itemArray.map((item) =>\r\n        this.getFormatDataToTreatment(item)\r\n      );\r\n\r\n      // Step 2: Get raw data (values to totals)\r\n      this.getRawData(\r\n        customTotalRows,\r\n        formatedData,\r\n        customTotalType,\r\n        rawDataRow\r\n      );\r\n\r\n      rawData.push(rawDataRow);\r\n    });\r\n\r\n    if (customTotalRows && customTotalRows.length && rawData.length) {\r\n      let procesedTotals = [];\r\n\r\n      switch (customOperationFormatting) {\r\n        case OperationFormat.RES:\r\n          procesedTotals = this.trasposeMatrix(rawData).map((itemArray) => {\r\n            return itemArray.reduce((a, b) => a - b);\r\n          });\r\n          break;\r\n        default:\r\n          procesedTotals = this.trasposeMatrix(rawData).map((itemArray) =>\r\n            itemArray.reduce((a, b) => a + b, 0)\r\n          );\r\n          break;\r\n      }\r\n\r\n      if (customTotalFormatting && customTotalFormatting.length) {\r\n        procesedTotals = customTotalFormatting.map((format, index) => {\r\n          let value, align, fixed, less;\r\n\r\n          switch (format) {\r\n            case NumberFormat.CUR:\r\n              value = this.currencyPipe.transform(procesedTotals[index]);\r\n              break;\r\n            default:\r\n              value = procesedTotals[index];\r\n              break;\r\n          }\r\n\r\n          align = customTotalAlign[index];\r\n          fixed = customTotalFixed[index];\r\n          less = procesedTotals[index] <= -1;\r\n\r\n          return {\r\n            value,\r\n            align,\r\n            fixed,\r\n            less,\r\n          };\r\n        });\r\n      }\r\n\r\n      tableFooterData = procesedTotals.length ? procesedTotals : null;\r\n    }\r\n\r\n    let finalFooterData = [];\r\n\r\n    // Clear data\r\n    if (customTotalRows && customTotalRows.length) {\r\n      let cont = 0;\r\n      for (let i = 0; i < this.header.length; i++) {\r\n        let itemToPush;\r\n\r\n        customTotalRows.forEach((customIndex) => {\r\n          if (customIndex === i) {\r\n            itemToPush = tableFooterData[cont];\r\n            cont++;\r\n          }\r\n        });\r\n\r\n        if (i === 0 && customTotalTitle) {\r\n          itemToPush = {\r\n            fixed: 'td-sticky-left title-total',\r\n            value: customTotalTitle,\r\n          };\r\n        }\r\n\r\n        if (this.header.length === i + 1 && !this.hiddenActions) {\r\n          itemToPush = { fixed: 'td-sticky-right' };\r\n        }\r\n\r\n        finalFooterData.push(itemToPush);\r\n      }\r\n    }\r\n\r\n    this.footerRow = finalFooterData;\r\n  }\r\n\r\n  formatCurrencyToNumber(value: string): number {\r\n    if (value !== undefined && value !== null)\r\n      return Number(String(value).replace(/[^0-9.-]+/g, ''));\r\n  }\r\n\r\n  trasposeMatrix(matrix) {\r\n    return matrix[0].map((_, colIndex) => matrix.map((row) => row[colIndex]));\r\n  }\r\n\r\n  toggleFilterClass(index: number) {\r\n    return `bi ${\r\n      this.orderHeaderStatus[index] ? 'bi-caret-up-fill' : 'bi-caret-down-fill'\r\n    } icon-order`;\r\n  }\r\n\r\n  isObject(val): boolean {\r\n    return typeof val === 'object';\r\n  }\r\n\r\n  getRawData(customTotalRows, formatedData, customTotalType, rawDataRow) {\r\n    if (customTotalRows && customTotalRows.length) {\r\n      customTotalRows.forEach((customIndex, indexCol) => {\r\n        formatedData.forEach((item, index) => {\r\n          if (customIndex === index) {\r\n            let returnItem = 0;\r\n\r\n            customTotalType.forEach((type, indexType) => {\r\n              if (indexCol === indexType) {\r\n                switch (type) {\r\n                  case FormatType.NUM:\r\n                    if (\r\n                      (typeof item === 'string' &&\r\n                        (item == '--' || item === '')) ||\r\n                      typeof item === 'undefined'\r\n                    ) {\r\n                      returnItem = 0;\r\n                    } else {\r\n                      returnItem = Number(item);\r\n                    }\r\n                    break;\r\n                  case FormatType.CUR:\r\n                    if (\r\n                      (typeof item === 'string' &&\r\n                        (item == '--' || item === '')) ||\r\n                      typeof item === 'undefined'\r\n                    ) {\r\n                      returnItem = 0;\r\n                    } else {\r\n                      returnItem = this.formatCurrencyToNumber(item);\r\n                    }\r\n                    break;\r\n                  case FormatType.COU:\r\n                    if (\r\n                      (typeof item === 'string' &&\r\n                        (item == '--' || item === '')) ||\r\n                      typeof item === 'undefined'\r\n                    ) {\r\n                      returnItem = 0;\r\n                    } else {\r\n                      returnItem = 1;\r\n                    }\r\n                    break;\r\n                  default:\r\n                    returnItem = 0;\r\n                }\r\n              }\r\n            });\r\n            rawDataRow.push(returnItem);\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  getFormatDataToTreatment(item) {\r\n    if (typeof item === 'object') {\r\n      if (item != null) {\r\n        if (item.title && item.subtitle) {\r\n          return `${item.title}\\n${item.subtitle}`;\r\n        } else {\r\n          return item.title ? item.title : item.subtitle && item.subtitle;\r\n        }\r\n      } else {\r\n        return '';\r\n      }\r\n    } else {\r\n      return item;\r\n    }\r\n  }\r\n\r\n  onDeleteItem(item: any) {\r\n    this.onDelete.emit(item);\r\n  }\r\n\r\n  onActiveItem(item: any) {\r\n    this.onActive.emit(item);\r\n  }\r\n\r\n  onUpdateItem(item: any) {\r\n    this.onUpdate.emit(item);\r\n  }\r\n\r\n  onShowItem(item: any, $event: any) {\r\n    this.onShow.emit(item);\r\n    this.onShowEvent.emit($event);\r\n  }\r\n}\r\n","import { CurrencyPipe, DatePipe } from '@angular/common';\r\nimport {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  QueryList,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewChildren,\r\n} from '@angular/core';\r\n\r\nimport * as jsPDF from 'jspdf';\r\nimport 'jspdf-autotable';\r\n\r\nimport { Angular2Txt } from 'angular2-txt/Angular2-txt';\r\nimport { ExcelService } from '../services/excel.service';\r\nimport { TableComponent } from '../component/table/table.component';\r\n\r\nenum NumberFormat {\r\n  NUM = 'number',\r\n  CUR = 'currency',\r\n}\r\n\r\nenum AlignClass {\r\n  LEFT = 'text-align: start;',\r\n  RIGHT = 'text-align: end;',\r\n}\r\n\r\nenum FormatType {\r\n  NUM = 'number',\r\n  CUR = 'currency',\r\n  DIF = 'difference',\r\n  COU = 'count',\r\n}\r\n\r\ninterface IReportConfig {\r\n  title: string;\r\n  subtitle: string;\r\n  subject: string;\r\n  sessionDate: Date;\r\n  tableTitle: string;\r\n  customHeader?: string[];\r\n  customIndexRows?: number[];\r\n  customTotalRows?: number[];\r\n  customTotalFormatting?: NumberFormat[];\r\n  customTotalType?: FormatType[];\r\n  footLabel?: string;\r\n}\r\n\r\ninterface IFooterConfig {\r\n  customTotalRows?: number[];\r\n  customTotalFormatting?: NumberFormat[];\r\n  customTotalType?: FormatType[];\r\n  customTotalAlign?: AlignClass[];\r\n}\r\n\r\ninterface ISearchParamsProps {\r\n  bancorresponsal: string;\r\n  desde?: string;\r\n  hasta?: string;\r\n  ruc: string;\r\n  tipo: string;\r\n  numfactura?: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'nexti-lib-datatable',\r\n  templateUrl: './nexti-lib-datatable.component.html',\r\n  styleUrls: ['./nexti-lib-datatable.component.sass'],\r\n})\r\nexport class NextiLibDatatableComponent implements OnInit {\r\n  @Input() header: Array<any>;\r\n  @Input() customHeader?: boolean;\r\n  @Input() list: Array<any>;\r\n  @Input() titleEmpty: string;\r\n  @Input() title: string;\r\n  @Input() titleXs: boolean = false;\r\n  @Input() btnModal: boolean;\r\n  @Input() recursos: any;\r\n  @Input() selectFilter: any;\r\n  @Input() hiddenActions: boolean;\r\n  @Input() breadcrumbs: Array<any>;\r\n  @Input() infoAdicional: Array<any>;\r\n  @Input() linkBack: boolean = false;\r\n  @Input() reportConfig?: IReportConfig;\r\n  @Input() opOcultarBuscar: boolean;\r\n  @Input() opOcultarFooter: boolean;\r\n  @Input() footerConfig?: IFooterConfig;\r\n  @Input() actionState: boolean = false;\r\n  @Input() paginacion?: boolean = false;\r\n  @Input() totalRegistros?: number = 0;\r\n  @Input() multFPP?: number = 0;\r\n  @Input() actualPage?: number = 0;\r\n\r\n  @Input() excelData?: any;\r\n  @Input() multiTable: boolean = false;\r\n  @Input() sections: boolean = false;\r\n  @Input() isLoading?: boolean;\r\n\r\n  @Output() onDelete = new EventEmitter<any>();\r\n  @Output() onUpdate = new EventEmitter<any>();\r\n  @Output() onActive = new EventEmitter<any>();\r\n  @Output() onShow = new EventEmitter<any>();\r\n  @Output() onShowEvent = new EventEmitter<any>();\r\n  @Output() onBack = new EventEmitter<any>();\r\n  @Output() onfilter = new EventEmitter<any>();\r\n  @Output() onNext = new EventEmitter<any>();\r\n  @Output() onReturn = new EventEmitter<any>();\r\n  @ViewChild('search') inputSearch!: ElementRef;\r\n  @ViewChildren(TableComponent) datatable: QueryList<TableComponent>;\r\n\r\n  data$ = new Array<any>();\r\n  // TODO mejorar, con un estado de header normalizado se puede prescindir de esta variable\r\n  dataPerm$ = new Array<any>();\r\n  originalList: Array<any>;\r\n  footerRow = [];\r\n  filterSelected: any = null;\r\n\r\n  constructor(\r\n    private datePipe: DatePipe,\r\n    private currencyPipe: CurrencyPipe,\r\n    private excelService: ExcelService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.selectFilter?.forEach((element) => {\r\n      if (element.selected) {\r\n        this.filterSelected = element.value;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const { list } = changes;\r\n    if (list?.currentValue !== list?.previousValue) {\r\n      this.data$ = list?.currentValue;\r\n      this.dataPerm$ = list?.currentValue;\r\n      if (this.inputSearch) this.inputSearch.nativeElement.value = '';\r\n    }\r\n  }\r\n\r\n  ngDoCheck() {\r\n    this.datatable?.forEach((element) => {\r\n      if (this.footerConfig) element.getFooterData();\r\n    });\r\n  }\r\n\r\n  onFilter() {\r\n    this.onfilter.emit(this.filterSelected);\r\n  }\r\n\r\n  onDeleteItem(item: any) {\r\n    this.onDelete.emit(item);\r\n  }\r\n\r\n  onUpdateItem(item: any) {\r\n    this.onUpdate.emit(item);\r\n  }\r\n\r\n  onActiveItem(item: any) {\r\n    this.onActive.emit(item);\r\n  }\r\n\r\n  onShowItem(item: any) {\r\n    this.onShow.emit(item);\r\n  }\r\n\r\n  onShowItemEvent($event: any) {\r\n    this.onShowEvent.emit($event);\r\n  }\r\n\r\n  onlyNumbers(event) {\r\n    return event.charCode >= 48 && event.charCode <= 57;\r\n  }\r\n\r\n  customSearchBancoFn(term: string, item: any) {\r\n    term = term.toLowerCase();\r\n\r\n    return item.bancorresponsal.toLowerCase().includes(term);\r\n  }\r\n\r\n  customSearchCompaniesFn(term: string, item: any) {\r\n    term = term.toLowerCase();\r\n\r\n    return (\r\n      item.ruc.includes(term) || item.razonSocial.toLowerCase().includes(term)\r\n    );\r\n  }\r\n\r\n  filter(search: string) {\r\n    if (this.multiTable) {\r\n      let datafilter = [];\r\n      for (const list of this.dataPerm$) {\r\n        let data = this.filterList(list, search);\r\n        datafilter.push(data);\r\n      }\r\n      this.data$ = datafilter;\r\n    } else {\r\n      this.data$ = this.filterList(this.dataPerm$, search);\r\n    }\r\n  }\r\n\r\n  filterList(list, search) {\r\n    return list.filter((lista) => {\r\n      for (const row of lista) {\r\n        if (typeof row === 'object') {\r\n          if (\r\n            (row.title && this.toCompareString(row.title, search)) ||\r\n            (row.subtitle && this.toCompareString(row.subtitle, search))\r\n          ) {\r\n            return lista;\r\n          }\r\n        } else if (this.toCompareString(row, search)) {\r\n          return lista;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  toCompareString(item, search) {\r\n    return item\r\n      .toString()\r\n      .toUpperCase()\r\n      .includes(search.toString().toUpperCase());\r\n  }\r\n\r\n  getReportHeader(): string[] {\r\n    const { customHeader } = this.reportConfig;\r\n\r\n    return customHeader\r\n      ? customHeader\r\n      : this.header.map((item) => {\r\n          if (typeof item === 'object') {\r\n            return item.title;\r\n          } else {\r\n            return item;\r\n          }\r\n        });\r\n  }\r\n\r\n  getFormatDataToTreatment(item) {\r\n    if (typeof item === 'object') {\r\n      if (item != null) {\r\n        if (item.title && item.subtitle) {\r\n          return `${item.title}\\n${item.subtitle}`;\r\n        } else {\r\n          return item.title ? item.title : item.subtitle && item.subtitle;\r\n        }\r\n      } else {\r\n        return '';\r\n      }\r\n    } else {\r\n      return item;\r\n    }\r\n  }\r\n\r\n  getRawData(customTotalRows, formatedData, customTotalType, rawDataRow) {\r\n    if (customTotalRows && customTotalRows.length) {\r\n      customTotalRows.forEach((customIndex, indexCol) => {\r\n        formatedData.forEach((item, index) => {\r\n          if (customIndex === index) {\r\n            let returnItem = 0;\r\n\r\n            customTotalType.forEach((type, indexType) => {\r\n              if (indexCol === indexType) {\r\n                switch (type) {\r\n                  case FormatType.NUM:\r\n                    if (\r\n                      (typeof item === 'string' &&\r\n                        (item == '--' || item === '')) ||\r\n                      typeof item === 'undefined'\r\n                    ) {\r\n                      returnItem = 0;\r\n                    } else {\r\n                      returnItem = Number(item);\r\n                    }\r\n                    break;\r\n                  case FormatType.CUR:\r\n                    if (\r\n                      (typeof item === 'string' &&\r\n                        (item == '--' || item === '')) ||\r\n                      typeof item === 'undefined'\r\n                    ) {\r\n                      returnItem = 0;\r\n                    } else {\r\n                      returnItem = this.formatCurrencyToNumber(item);\r\n                    }\r\n                    break;\r\n                  case FormatType.COU:\r\n                    if (\r\n                      (typeof item === 'string' &&\r\n                        (item == '--' || item === '')) ||\r\n                      typeof item === 'undefined'\r\n                    ) {\r\n                      returnItem = 0;\r\n                    } else {\r\n                      returnItem = 1;\r\n                    }\r\n                    break;\r\n                  default:\r\n                    returnItem = 0;\r\n                }\r\n              }\r\n            });\r\n            rawDataRow.push(returnItem);\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  getReportBody() {\r\n    const {\r\n      customIndexRows,\r\n      customTotalRows,\r\n      customTotalFormatting,\r\n      customTotalType,\r\n      footLabel,\r\n    } = this.reportConfig;\r\n\r\n    let tableData = [];\r\n    let tableFooterData = [];\r\n    let rawData = [];\r\n\r\n    this.data$.forEach((itemArray) => {\r\n      let tableDataRow = [];\r\n      let rawDataRow = [];\r\n\r\n      // Step 1: format - prepare dat\r\n      const formatedData = itemArray.map((item) =>\r\n        this.getFormatDataToTreatment(item)\r\n      );\r\n\r\n      // Step 2: Generate Filter data\r\n      if (customIndexRows && customIndexRows.length) {\r\n        customIndexRows.forEach((customIndex) => {\r\n          formatedData.forEach((item, index) => {\r\n            if (customIndex === index) {\r\n              tableDataRow.push(item);\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        tableDataRow = formatedData;\r\n      }\r\n\r\n      // Step 3: Get raw data (values to totals)\r\n      this.getRawData(\r\n        customTotalRows,\r\n        formatedData,\r\n        customTotalType,\r\n        rawDataRow\r\n      );\r\n\r\n      tableData.push(tableDataRow);\r\n      rawData.push(rawDataRow);\r\n    });\r\n\r\n    if (customTotalRows && customTotalRows.length && rawData.length) {\r\n      let procesedTotals = [];\r\n\r\n      procesedTotals = this.trasposeMatrix(rawData).map((itemArray) =>\r\n        itemArray.reduce((a, b) => a + b, 0)\r\n      );\r\n\r\n      if (customTotalFormatting && customTotalFormatting.length) {\r\n        procesedTotals = customTotalFormatting.map((format, index) => {\r\n          switch (format) {\r\n            case NumberFormat.CUR:\r\n              return this.currencyPipe.transform(procesedTotals[index]);\r\n            default:\r\n              return procesedTotals[index];\r\n          }\r\n        });\r\n      }\r\n\r\n      procesedTotals = [[footLabel, ...procesedTotals]];\r\n\r\n      tableFooterData = procesedTotals.length ? procesedTotals : null;\r\n    }\r\n\r\n    return {\r\n      tableData,\r\n      tableFooterData,\r\n    };\r\n  }\r\n\r\n  generatePdf() {\r\n    const pdf = new jsPDF.jsPDF();\r\n    pdf.setProperties({\r\n      title: 'Resultados Netos',\r\n    });\r\n\r\n    const { title, subtitle, subject, sessionDate, tableTitle } =\r\n      this.reportConfig;\r\n\r\n    const pageSize = pdf.internal.pageSize;\r\n    const pageWidth = pageSize.width ? pageSize.width : pageSize.getWidth();\r\n\r\n    // Section I\r\n    (pdf as any).autoTable({\r\n      body: [\r\n        [title, this.datePipe.transform(Date.now(), 'dd/MM/yyyy HH:mm')],\r\n        [\r\n          {\r\n            content: subtitle,\r\n            colSpan: 2,\r\n            styles: { fontSize: 12, fontStyle: 'normal' },\r\n          },\r\n        ],\r\n      ],\r\n      showHead: false,\r\n      theme: 'plain',\r\n      styles: {\r\n        fillColor: [48, 84, 150],\r\n        textColor: 255,\r\n        valign: 'bottom',\r\n      },\r\n      columnStyles: {\r\n        0: { fontStyle: 'bold', fontSize: 13 },\r\n        1: { fontSize: 11, halign: 'right' },\r\n      },\r\n    });\r\n\r\n    // Section II left\r\n    const lastTableY = (pdf as any).lastAutoTable.finalY + 5;\r\n\r\n    (pdf as any).autoTable({\r\n      body: [[subject]],\r\n      showHead: false,\r\n      theme: 'plain',\r\n      startY: lastTableY,\r\n      styles: {\r\n        fillColor: [255, 255, 153],\r\n        textColor: 0,\r\n        valign: 'bottom',\r\n        fontSize: 11,\r\n        fontStyle: 'bold',\r\n        overflow: 'hidden',\r\n      },\r\n      margin: { right: 100 },\r\n    });\r\n\r\n    // Section II right\r\n    (pdf as any).autoTable({\r\n      body: [\r\n        [\r\n          'SESION COMPENSACION:',\r\n          this.datePipe.transform(sessionDate, 'dd/MM/yy, HH:mm', 'UTC'),\r\n        ],\r\n      ],\r\n      showHead: false,\r\n      theme: 'plain',\r\n      startY: lastTableY,\r\n      styles: {\r\n        fillColor: [255, 255, 153],\r\n        textColor: 0,\r\n        valign: 'bottom',\r\n        fontSize: 10,\r\n        overflow: 'hidden',\r\n      },\r\n      margin: { left: pageWidth - 90 },\r\n      columnStyles: {\r\n        1: { halign: 'right' },\r\n      },\r\n    });\r\n\r\n    // Section III\r\n    (pdf as any).autoTable({\r\n      body: [[tableTitle]],\r\n      showHead: false,\r\n      theme: 'plain',\r\n      startY: (pdf as any).lastAutoTable.finalY + 10,\r\n      styles: {\r\n        fillColor: [31, 78, 120],\r\n        textColor: 255,\r\n        valign: 'bottom',\r\n        fontSize: 11,\r\n        fontStyle: 'bold',\r\n      },\r\n    });\r\n\r\n    const header = [this.getReportHeader()];\r\n    const { tableData, tableFooterData } = this.getReportBody();\r\n\r\n    // Section IV\r\n    const tableRenderObj: any = {\r\n      head: header,\r\n      body: tableData,\r\n      theme: 'striped',\r\n      showHead: 'firstPage',\r\n      showFoot: 'lastPage',\r\n      startY: (pdf as any).lastAutoTable.finalY,\r\n      headStyles: { fillColor: [214, 220, 228], textColor: 0 },\r\n      footStyles: { fillColor: [31, 78, 120], textColor: 255 },\r\n      foot: tableFooterData.length ? tableFooterData : false,\r\n      styles: { fontSize: 9 },\r\n    };\r\n\r\n    (pdf as any).autoTable(tableRenderObj);\r\n\r\n    // Open PDF document in browser's new tab\r\n    // pdf.output('pdfobjectnewwindow');\r\n    pdf.save();\r\n  }\r\n\r\n  generateTxt() {\r\n    const header = this.getReportHeader();\r\n\r\n    const options = {\r\n      headers: header,\r\n      fieldSeparator: ';',\r\n      quoteStrings: '',\r\n      decimalseparator: ',',\r\n    };\r\n\r\n    let { tableData, tableFooterData } = this.getReportBody();\r\n\r\n    tableData = [header, ...tableData];\r\n    tableData = tableFooterData.length\r\n      ? [...tableData, ...tableFooterData]\r\n      : tableData;\r\n\r\n    const data = this.convertToJSON(tableData);\r\n    new Angular2Txt(data, 'Resultados Netos', options);\r\n  }\r\n\r\n  getFooterData() {\r\n    const {\r\n      customTotalRows,\r\n      customTotalFormatting,\r\n      customTotalType,\r\n      customTotalAlign,\r\n    } = this.footerConfig;\r\n\r\n    let tableFooterData = [];\r\n    let rawData = [];\r\n\r\n    this.data$.forEach((itemArray) => {\r\n      let rawDataRow = [];\r\n\r\n      // Step 1: format - prepare dat\r\n      const formatedData = itemArray.map((item) =>\r\n        this.getFormatDataToTreatment(item)\r\n      );\r\n\r\n      // Step 2: Get raw data (values to totals)\r\n      this.getRawData(\r\n        customTotalRows,\r\n        formatedData,\r\n        customTotalType,\r\n        rawDataRow\r\n      );\r\n\r\n      rawData.push(rawDataRow);\r\n    });\r\n\r\n    if (customTotalRows && customTotalRows.length && rawData.length) {\r\n      let procesedTotals = [];\r\n\r\n      procesedTotals = this.trasposeMatrix(rawData).map((itemArray) =>\r\n        itemArray.reduce((a, b) => a + b, 0)\r\n      );\r\n\r\n      if (customTotalFormatting && customTotalFormatting.length) {\r\n        procesedTotals = customTotalFormatting.map((format, index) => {\r\n          let value, align;\r\n\r\n          switch (format) {\r\n            case NumberFormat.CUR:\r\n              value = this.currencyPipe.transform(procesedTotals[index]);\r\n              break;\r\n            default:\r\n              value = procesedTotals[index];\r\n              break;\r\n          }\r\n\r\n          align = customTotalAlign[index];\r\n\r\n          return {\r\n            value,\r\n            align,\r\n          };\r\n        });\r\n      }\r\n\r\n      tableFooterData = procesedTotals.length ? procesedTotals : null;\r\n    }\r\n\r\n    let finalFooterData = [];\r\n\r\n    // Clear data\r\n    if (customTotalRows && customTotalRows.length) {\r\n      let cont = 0;\r\n      for (let i = 0; i < this.header.length; i++) {\r\n        let itemToPush;\r\n\r\n        customTotalRows.forEach((customIndex) => {\r\n          if (customIndex === i) {\r\n            itemToPush = tableFooterData[cont];\r\n            cont++;\r\n          }\r\n        });\r\n\r\n        finalFooterData.push(itemToPush);\r\n      }\r\n    }\r\n\r\n    this.footerRow = finalFooterData;\r\n  }\r\n\r\n  exportAsXLSX(): void {\r\n    this.excelService.exportAsExcelFile(\r\n      this.excelData,\r\n      'planilla_compensacion'\r\n    );\r\n  }\r\n\r\n  formatCurrencyToNumber(value: string): number {\r\n    if (value !== undefined && value !== null)\r\n      return Number(String(value).replace(/[^0-9.-]+/g, ''));\r\n  }\r\n\r\n  isNumber(value: any) {\r\n    let regex = /^\\d*\\.?\\d*$/;\r\n    return regex.test(value);\r\n  }\r\n\r\n  trasposeMatrix(matrix) {\r\n    return matrix[0].map((_, colIndex) => matrix.map((row) => row[colIndex]));\r\n  }\r\n\r\n  convertToJSON(array) {\r\n    var objArray = [];\r\n    for (var i = 1; i < array.length; i++) {\r\n      objArray[i - 1] = {};\r\n      for (var k = 0; k < array[0].length && k < array[i].length; k++) {\r\n        var key = array[0][k];\r\n        let actualElement = array[i][k];\r\n        let el = actualElement;\r\n        if (typeof actualElement === 'string') {\r\n          el = actualElement.replace(/\\n/g, ' ');\r\n        } else if (typeof actualElement === 'undefined') {\r\n          el = '';\r\n        }\r\n        objArray[i - 1][key] = el;\r\n      }\r\n    }\r\n\r\n    return objArray;\r\n  }\r\n\r\n  onBackItem() {\r\n    this.onBack.emit();\r\n  }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'lib-breadcrumbs',\r\n  templateUrl: './breadcrumbs.component.html',\r\n  styleUrls: ['./breadcrumbs.component.sass']\r\n})\r\nexport class BreadcrumbsComponent implements OnInit {\r\n\r\n  @Input() breadcrumbs: Array<any> = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'lib-titlesecondary',\r\n  templateUrl: './titlesecondary.component.html',\r\n  styleUrls: ['./titlesecondary.component.sass'],\r\n})\r\nexport class TitlesecondaryComponent implements OnInit {\r\n  @Input() infoAdicional: Array<any> = [];\r\n  title: string;\r\n  subtitle: string;\r\n\r\n  constructor() {\r\n    this.title = '';\r\n    this.subtitle = '';\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const { infoAdicional } = changes;\r\n    if (infoAdicional?.currentValue !== infoAdicional?.previousValue) {\r\n      this.title = this.infoAdicional[0]?.title;\r\n      this.subtitle = this.infoAdicional[0]?.subtitle;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.title = this.infoAdicional[0]?.title;\r\n    this.subtitle = this.infoAdicional[0]?.subtitle;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { NextiLibDatatableComponent } from './pages/nexti-lib-datatable.component';\r\n\r\nimport { FormsModule } from '@angular/forms';\r\nimport { CommonModule, CurrencyPipe, DatePipe } from '@angular/common';\r\nimport { NgSelectModule } from '@ng-select/ng-select';\r\nimport { BreadcrumbsComponent } from './component/breadcrumbs/breadcrumbs.component';\r\nimport { TitlesecondaryComponent } from './component/titlesecondary/titlesecondary.component';\r\nimport { TableComponent } from './component/table/table.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NextiLibDatatableComponent,\r\n    BreadcrumbsComponent,\r\n    TitlesecondaryComponent,\r\n    TableComponent,\r\n  ],\r\n  imports: [FormsModule, CommonModule, NgSelectModule],\r\n  exports: [NextiLibDatatableComponent],\r\n  providers: [DatePipe, CurrencyPipe],\r\n})\r\nexport class NextiLibDatatableModule {}\r\n"]}